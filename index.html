<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flashcard Study App</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2563eb">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="styles.css">
  <script>
    // /_sdk/element_sdk.js
(function () {
  let config = {};

  window.elementSdk = {
    init(api) {
      // Store defaults
      config = { ...(api?.defaultConfig || {}) };

      // Expose fake edit panel updates if needed
      window.__elementApi = api;
    },

    setConfig(newConfig) {
      config = { ...config, ...newConfig };

      // Notify app if config changes
      if (window.__elementApi?.onConfigChange) {
        window.__elementApi.onConfigChange(config);
      }
    },

    getConfig() {
      return { ...config };
    }
  };
})();
  </script>
<script>
(function () {
  const STORAGE_KEY = "flashcards_data";
  let handler = null;
  let data = [];

  function load() {
    try {
      data = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    } catch {
      data = [];
    }
  }

  function save() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function notify() {
    if (handler && typeof handler.onDataChanged === "function") {
      handler.onDataChanged([...data]);
    }
  }

  function generateId() {
    return "id_" + Date.now() + "_" + Math.random().toString(36).slice(2, 8);
  }

  window.dataSdk = {
    async init(h) {
      handler = h;
      load();
      notify();
      return { isOk: true };
    },

    async create(item) {
      const newItem = {
        ...item,
        id: generateId()
      };
      data.push(newItem);
      save();
      notify();
      return { isOk: true, item: newItem };
    },

    async delete({ id }, silent = false) {
     if (!id) return { isOk: false };
     data = data.filter(d => d.id !== id);
     save();
     if (!silent) notify();
     return { isOk: true };
    },

    async update(updatedItem) {
      if (!updatedItem?.id) return { isOk: false };

      const index = data.findIndex(d => d.id === updatedItem.id);
      if (index !== -1) {
        data[index] = updatedItem;
        save();
        notify();
      }
      return { isOk: true };
    },

    getAll() {
      return [...data];
    }
  };
})();
</script>
  <script src="tailwindcss.js"></script>

  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full"></div>
  <div id="aiLoading" class="loading">
  <div class="spinner"></div>
  <p>Generating cards with AIâ€¦</p>
</div>
   <script src="app.js"></script>
   <button
  id="installAppBtn"
  style="
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 12px 18px;
    border-radius: 12px;
    background: #2563eb;
    color: white;
    font-weight: 600;
    border: none;
    box-shadow: 0 10px 20px rgba(0,0,0,.15);
    cursor: pointer;
    z-index: 9999;
  "
>
  ðŸ“¥ Install App
</button>

 </body>
 </html>
